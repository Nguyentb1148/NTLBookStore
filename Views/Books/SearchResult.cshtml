@model NTLBookStore.ViewModels.SearchViewModel

@{
    ViewData["Title"] = "Search";
}

<h1>Search</h1>

<form method="get" asp-action="Index" asp-controller="Books">
    <div class="form-group">
        <label for="keyword">Keyword:</label>
        <input type="text" class="form-control" id="keyword" name="keyword" value="@Model.KeyWord" />
    </div>
    <div class="form-group">
        <label for="category">Category:</label>
        <select class="form-control" id="category" name="category">
            <option value="">-- All Categories --</option>
            @foreach (var category in Model.CategoriesSelectList)
            {
                <option value="@category" selected="@Equals(Model.BookCategory, category)" ? selected : null>@category</option>
            }
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
</form>

@if (Model.Books != null && Model.Books.Count > 0)
{
    <h2>Search Results</h2>
    <ul>
        @foreach (var book in Model.Books)
        {
            <li>
                <a href="@Url.Action("Details", "Books", new { id = book.Id })">@book.Title</a>
                @* <span>(@book.Author, @book.PublishedYear)</span> *@
            </li>
        }
    </ul>
}
else if (!string.IsNullOrEmpty(Model.KeyWord) || !string.IsNullOrEmpty(Model.BookCategory))
{
    <p>No books found matching your search criteria.</p>
}